<div class="toolbar">
  <div class="toolbar-left">
    <button class="logo-btn" (click)="onOpenProjects()" title="Meus Projetos">
      <span class="material-icons-round">folder_open</span>
    </button>
    <span class="logo">Portfólio Maker</span>
    
    <!-- Indicador do Projeto Atual -->
    <div class="project-indicator">
      @if (isEditingName) {
        <input 
          #projectNameInput
          type="text" 
          class="project-name-input"
          [value]="projectState.currentProjectName() || 'Novo Projeto'"
          (blur)="saveProjectName($event)"
          (keydown.enter)="saveProjectName($event)"
          (keydown.escape)="cancelEditName()"
        >
      } @else {
        <span 
          class="project-name" 
          (click)="startEditName()" 
          title="Clique para editar o nome do projeto"
        >
          {{ projectState.currentProjectName() || 'Novo Projeto' }}
          <span class="edit-icon material-icons-round">edit</span>
        </span>
      }
      @if (projectState.hasUnsavedChanges()) {
        <span class="save-status unsaved" title="Alterações não salvas - Clique para salvar" (click)="onSaveProject()">
          <span class="material-icons-round">circle</span>
        </span>
      } @else {
        <span class="save-status saved" title="Projeto salvo">
          <span class="material-icons-round">check_circle</span>
        </span>
      }
    </div>
  </div>

  <!-- Botão Menu Mobile -->
  <button class="mobile-menu-btn" (click)="toggleMobileMenu()">
    <span class="hamburger-icon" [class.open]="isMobileMenuOpen">
      <span></span>
      <span></span>
      <span></span>
    </span>
  </button>
  
  <!-- Menu Desktop -->
  <div class="toolbar-center desktop-only">
    <button class="btn btn-secondary" (click)="onImportBatch()">
      <span class="material-icons-round">auto_awesome</span> Importar Inteligente
    </button>
    
    <button class="btn" (click)="onAddImages()">
      <span class="material-icons-round">add_photo_alternate</span> Adicionar Fotos
    </button>
    <input 
      #fileInput
      type="file" 
      multiple 
      accept="image/*" 
      (change)="onFilesSelected($event)"
      class="hidden-input"
      title="Selecionar fotos"
    >

    <button class="btn" (click)="onAddText()">
      <span class="material-icons-round">text_fields</span> Adicionar Texto
    </button>
    
    <button class="btn" (click)="onNewSlide()">
      <span class="material-icons-round">add_to_photos</span> Novo Slide
    </button>
    
    <div class="separator"></div>
    
    <button 
      class="btn" 
      (click)="onAlignToGrid()"
      title="Alinhar todos os elementos na grade"
    >
      <span class="material-icons-round">grid_on</span> Alinhar à Grade
    </button>

    <button 
      class="btn"
      [class.btn-active]="slideService.showGridGuides()"
      (click)="onToggleGridGuides()"
      title="Mostrar/ocultar linhas de grade do layout"
    >
      <span class="material-icons-round">{{ slideService.showGridGuides() ? 'grid_view' : 'grid_off' }}</span> Grade
    </button>
  </div>
  
  <div class="toolbar-right desktop-only">
    <button class="btn btn-presentation" (click)="onStartPresentation()" title="Iniciar apresentação (F5)">
      <span class="material-icons-round">play_arrow</span> Apresentar
    </button>
  </div>
</div>

<!-- Menu Mobile Dropdown -->
<div class="mobile-menu" [class.open]="isMobileMenuOpen">
  <div class="mobile-menu-overlay" (click)="closeMobileMenu()"></div>
  <div class="mobile-menu-content">
    <div class="mobile-menu-section">
      <span class="mobile-menu-title">Projeto</span>
      <button class="mobile-menu-item" (click)="onOpenProjects(); closeMobileMenu()">
        <span class="material-icons-round menu-icon">folder_open</span> Meus Projetos
      </button>
      <button class="mobile-menu-item save" (click)="onSaveProject(); closeMobileMenu()">
        <span class="material-icons-round menu-icon">save</span> Salvar Projeto
      </button>
    </div>
    
    <div class="mobile-menu-section">
      <span class="mobile-menu-title">Adicionar</span>
      <button class="mobile-menu-item" (click)="onImportBatch(); closeMobileMenu()">
        <span class="material-icons-round menu-icon">auto_awesome</span> Importar Inteligente
      </button>
      <button class="mobile-menu-item" (click)="onAddImages(); closeMobileMenu()">
        <span class="material-icons-round menu-icon">add_photo_alternate</span> Adicionar Fotos
      </button>
      <button class="mobile-menu-item" (click)="onAddText(); closeMobileMenu()">
        <span class="material-icons-round menu-icon">text_fields</span> Adicionar Texto
      </button>
      <button class="mobile-menu-item" (click)="onNewSlide(); closeMobileMenu()">
        <span class="material-icons-round menu-icon">add_to_photos</span> Novo Slide
      </button>
    </div>

    <div class="mobile-menu-section">
      <span class="mobile-menu-title">Visualização</span>
      <button class="mobile-menu-item" (click)="onAlignToGrid(); closeMobileMenu()">
        <span class="material-icons-round menu-icon">grid_on</span> Alinhar à Grade
      </button>
      <button 
        class="mobile-menu-item" 
        [class.active]="slideService.showGridGuides()"
        (click)="onToggleGridGuides()"
      >
        <span class="material-icons-round menu-icon">{{ slideService.showGridGuides() ? 'grid_view' : 'grid_off' }}</span> 
        {{ slideService.showGridGuides() ? 'Ocultar Grade' : 'Mostrar Grade' }}
      </button>
    </div>

    <div class="mobile-menu-section">
      <span class="mobile-menu-title">Apresentar</span>
      <button class="mobile-menu-item presentation" (click)="onStartPresentation(); closeMobileMenu()">
        <span class="material-icons-round menu-icon">play_arrow</span> Apresentar
      </button>
    </div>

    </div>
</div>
